\documentclass[a4paper,11pt,oneside]{article}
\usepackage[pdftex]{graphicx}
\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}
\usepackage{fancyhdr}
\usepackage[usenames,dvipsnames]{color}
\usepackage{colortbl}
\usepackage{tabularx}
\usepackage{hyperref}

\setlength{\headheight}{15.2pt}
\pagestyle{fancy}

\lhead{\nouppercase{\leftmark}}
\chead{}
\rhead{}

\hypersetup{
colorlinks,
citecolor=black,
filecolor=black,
linkcolor=black,
urlcolor=black
}

\setlength{\parskip}{6pt}

\begin{document}

%%%% Title Page %%%%%

%\pagenumbering{alph}

\begin{titlepage}
\begin{center}

% Upper part of the page
\includegraphics[width=0.2\textwidth]{img/logo-uclm.png}\\[1cm]
\textsc{\LARGE Escuela Superior de Informática}\\[0.5cm]
\textsc{\Large Universidad de Castilla -- La Mancha}\\[2.5cm]

% Title
{\LARGE Práctica 1}\\[0.5cm]
%\rule{\linewidth}{0.5mm}\\[0.4cm]
{\huge \textbf{Tres en raya definitivo}}\\[0.4cm]
%\rule{\linewidth}{0.5mm}\\[1.5cm]

% Authors

  \begin{minipage}{0.8\textwidth}
  \large
  %\hspace{1cm}\textbf{\emph{Autores}}\\

  Javier Marchán Loro\\
  Ángel Peralta López\\
  Rubén Pérez Pascual\\
  Antonio Ruedas García\\
  \end{minipage}

  \vfill

% Bottom of the page
\begin{minipage}{\textwidth}
\large
\begin{tabular}{rl}
\textbf{Asignatura}: & Ingeniería del Software II\\
\textbf{Titulación}: & Ingeniería Informática\\
\textbf{Fecha}: & \today
\end{tabular}
\end{minipage}

\end{center}
\end{titlepage}

%%%% end Title Page %%%%%

\clearpage
\section{Introducción}

Este documento describe el análisis, desarrollo e implementación llevados a cabo para obtener
el juego \textbf{Tres en raya definitivo} \footnote{Este documento no explica las reglas del juego}.

Se trata de una aplicación cliente-servidor para escritorio que se comunica a través de RMI.
El lenguaje utilizado para la implementación ha sido Java.

Este documento pretende que el lector obtenga una idea clara de la composición del sistema, para ello
se ha dividido en distintas secciones. En primer lugar los requisitos funcionales ayudan a entender el objetivo
buscado. La arquitectura del sistema junto con los casos de uso son las secciones más importantes, ya
que ayudarán al lector a hacerse una imagen mental, a alto nivel, del sistema desarrollado.

EL resto de secciones profundizan en el conocimiento del sistema.

\clearpage

\pagestyle{fancy}

\section{Requisitos funcionales}
 \input{03-requisitosToni.tex}
%\input{03-requisitos_apl.tex}
\clearpage
\section{Arquitectura del sistema}

A continuación se muestra una visión de la arquitectura del sistema. Se trata de
una arquitectura cliente-servidor a través de RMI. El cliente usa un
proxy para comunicarse con el servidor y éste conoce un proxy de cada cliente con el
que se comunica.
\\
\includegraphics[width=0.9\textwidth]{img/arquitectura/arquitectura.png}\\[1cm]

\subsection{Arquitectura del cliente}

A continuación se muestra la arquitectura del cliente. Esta es una arquitectura multicapa en el que existen varias capas:
\begin{itemize}
\item \emph{Interfaz:} Este paquete contiene las clases de las ventanas que se muestran al usuario, y las interfaces que estas implementan.
\item \emph{Controlador:} Este paquete contiene el controlador y su interfaz. Realiza las comunicaciones y el control de la interfaz gráfica con el dominio.
\item \emph{Dominio:} Contiene toda la lógica del juego. La clase Tablero9x9 contiene todas las reglas del juego y el modelo de la partida actual. La clase Fachada realiza las funciones de paso de mensajes entre las capas de control y comunicación, además de realizar las acciones consideradas en el modelo del juego.
\item \emph{Comunicación:} Contiene las clases que realizan la función de \emph{listener} como es el caso de la clase cliente, y el proxy con el servidor.Estas clases solamente se encargan del envío de los respectivos mensajes al servidor o a la fachada del paquete de dominio.
\end{itemize}
\includegraphics[width=0.9\textwidth]{img/arq_Cliente.png}\\[1cm]

\subsection{Arquitectura del servidor}

A continuación se muestra la arquitectura del servidor. Esta es una arquitectura multicapa en la que constan los siguientes paquetes:
\begin{itemize}
\item \emph{Comunicación:} Contiene las clases encargadas de la comunicación, en este caso la clase servidor y su interfaz RMI. La clase servidor actúa como \emph{listener} para escuchar solicitudes de los clientes. También responde a esos clientes ya que internamente guarda una hash con los clientes que se han dado de alta en el sistema.
\item \emph{Persistencia:} Contiene las clases encargadas de almacenar las partidas y sus respectivos tableros, jugadores y movimientos. Entre esas clases está la clase \emph{Broker} que actúa como agente entre el subsistema de base de datos y el sistema del servidor. Además se pueden observar las clases DAO, encargadas del almacenamiento de cada una de las entidades pertenecientes al dominio del juego.
\item \emph{Dominio:} Contiene las clases de dominio como las encargadas de representar a cualquier juego, además de la clase Fachada. Esta clase contiene una referencia a cada uno de los modelos que se están jugando en el sistema, es decir, contiene todos los tableros activos.

\end{itemize}
\includegraphics[width=0.9\textwidth]{img/arq_Servidor.png}\\[1cm]

\clearpage
\section{Casos de uso}

\subsection{Diagrama de casos de uso del cliente}

\includegraphics[width=0.9\textwidth]{img/cdu_Cliente.png}\\[1cm]

\subsection{Diagrama de casos de uso del servidor}

\includegraphics[width=0.9\textwidth]{img/cdu_Servidor.png}\\[1cm]

\section{Diagramas de secuencia}
\subsection{Diagramas de secuencia del cliente}

\subsubsection{Autenticar}

\includegraphics[width=0.9\textwidth]{img/ds_autenticar.png}\\[1cm]

\subsubsection{Cerrar sesión oponente}

\includegraphics[width=0.9\textwidth]{img/ds_CerrarSesionOponenteCliente.png}\\[1cm]

\subsubsection{Enviar respuesta de reto}

\includegraphics[width=0.9\textwidth]{img/ds_EnviarRespuestaRetoCliente.png}\\[1cm]

\subsubsection{Enviar reto}

\includegraphics[width=0.9\textwidth]{img/ds_EnviarRetoCliente.png}\\[1cm]

\subsubsection{Realizar movimiento}

\includegraphics[width=0.9\textwidth]{img/ds_RealizarMovimientoCliente.png}\\[1cm]

\subsubsection{Recibir movimiento}

\includegraphics[width=0.9\textwidth]{img/ds_RecibirMovimientoCliente.png}\\[1cm]


\subsection{Diagramas de secuencia del servidor}

\subsubsection{Cerrar sesión}

\includegraphics[width=0.9\textwidth]{img/ds_CerrarSesionServidor.png}\\[1cm]

\subsubsection{Enviar respuesta de reto}

\includegraphics[width=0.9\textwidth]{img/ds_EnviarRespuestaRetoServidor.png}\\[1cm]

\subsubsection{Realizar movimiento}

\includegraphics[width=0.9\textwidth]{img/ds_RealizarMovimientoServidor.png}\\[1cm]



\section{Máquinas de estado}

\subsection{Máquinas de estado del cliente}

\subsubsection{Aceptar reto}

\includegraphics[width=0.9\textwidth]{img/ms_aceptarRetoCliente.png}\\[1cm]

\subsubsection{Iniciar sesión}

\includegraphics[width=0.9\textwidth]{img/ms_IniciarSesionCliente.png}\\[1cm]


\subsubsection{Cerrar sesión}

\includegraphics[width=0.9\textwidth]{img/ms_CerrarSesionCliente.png}\\[1cm]


\subsubsection{Realizar movimiento}

\includegraphics[width=0.9\textwidth]{img/ms_RealizarMovimientoCliente.png}\\[1cm]


\subsubsection{Retar jugador}

\includegraphics[width=0.9\textwidth]{img/ms_RetarJugadorCliente.png}\\[1cm]

\subsubsection{Salir de partida}

\includegraphics[width=0.3\textwidth]{img/ms_SalirPartidaCliente.png}\\[1cm]


\subsection{Máquinas de estado del Servidor}

\subsubsection{Autenticar}

\includegraphics[width=0.9\textwidth]{img/ms_AutenticarServidor.png}\\[1cm]

\subsubsection{Borrar partida}

\includegraphics[width=0.9\textwidth]{img/ms_BorrarPartidaServidor.png}\\[1cm]

\subsubsection{Cerrar sesión}

\includegraphics[width=0.9\textwidth]{img/ms_CerrarSesionServidor.png}\\[1cm]

\subsubsection{Poner ficha}

\includegraphics[width=0.3\textwidth]{img/ms_PonerFichaServidor.png}\\[1cm]

\subsubsection{Registar usuario}

\includegraphics[width=0.9\textwidth]{img/ms_RegistrarUsuarioServidor.png}\\[1cm]

\subsubsection{Respuesta de reto}

\includegraphics[width=0.9\textwidth]{img/ms_RespuestaRetoServidor.png}\\[1cm]

\subsubsection{Retar jugador}

\includegraphics[width=0.9\textwidth]{img/ms_RetarJugadorServidor.png}\\[1cm]

\section{Diagrama de clases}

En esta sección se realizará un análisis más en profundidad del diseño tanto del cliente como del servidor en cuanto a sus clases se refiere.

\subsection{Diagrama de clases del cliente}

\includegraphics[width=1\textwidth]{img/ddc_Cliente.png}\\[1cm]

En el diagrama de clases se puede apreciar la arquitectura multicapa apareciéndo un paquete más , como es el paquete Excepciones.
\subsection{Diagrama de clases del servidor}

\includegraphics[width=1 \textwidth]{img/ddc_Servidor.png}\\[1cm]

\clearpage
\section{Pruebas de los casos de uso}


\end{document}
